# 🏗 프로젝트 아키텍처 다이어그램

> **팀원들을 위한 시각적 프로젝트 구조 설명**

---

## 📊 전체 시스템 아키텍처

```
┌─────────────────────────────────────────────────────────────────┐
│                        개발자 로컬 환경                          │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐         │
│  │   코드 수정  │    │   로컬 테스트 │    │  Git Push   │         │
│  │  (VSCode)   │───▶│ (localhost) │───▶│ (GitHub)   │         │
│  └─────────────┘    └─────────────┘    └─────────────┘         │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                        GitHub 저장소                            │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐         │
│  │   코드 저장  │    │  버전 관리   │    │  협업 관리   │         │
│  │  (Repository)│    │ (Git History)│    │ (Pull Request)│       │
│  └─────────────┘    └─────────────┘    └─────────────┘         │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                    Google Cloud Platform (GCP)                 │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐         │
│  │  Ubuntu VM  │    │   Docker    │    │   MySQL     │         │
│  │ (104.154.   │    │ Container   │    │ Database    │         │
│  │  212.61)    │    │             │    │             │         │
│  └─────────────┘    └─────────────┘    └─────────────┘         │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                      사용자 접속                                │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐         │
│  │   웹 브라우저 │    │  모바일 앱   │    │   API 호출   │         │
│  │ (Chrome,    │    │ (Android,   │    │ (Postman)  │         │
│  │  Safari)    │    │  iOS)      │    │            │         │
│  └─────────────┘    └─────────────┘    └─────────────┘         │
└─────────────────────────────────────────────────────────────────┘
```

---

## 🐳 Docker 컨테이너 구조

```
┌─────────────────────────────────────────────────────────────────┐
│                    Docker Container                            │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐         │
│  │   Django    │    │   Python    │    │   한글 폰트   │         │
│  │   Web App   │    │  Runtime    │    │ (NanumGothic)│        │
│  └─────────────┘    └─────────────┘    └─────────────┘         │
│           │                 │                 │                │
│           ▼                 ▼                 ▼                │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐         │
│  │   AI 모델    │    │   데이터베이스 │    │   정적 파일   │         │
│  │ (Random     │    │  (MySQL)    │    │ (CSS, IMG) │         │
│  │  Forest)    │    │             │    │            │         │
│  └─────────────┘    └─────────────┘    └─────────────┘         │
└─────────────────────────────────────────────────────────────────┘
```

---

## 📁 프로젝트 폴더 구조

```
Django_project/
│
├── 📁 lungcancer_project/          # Django 프로젝트 설정
│   ├── ⚙️  settings.py            # 모든 설정 (DB, 보안 등)
│   ├── 🔗 urls.py                 # 메인 URL 라우팅
│   ├── 🌐 wsgi.py                 # 웹서버 연결
│   └── 🔄 asgi.py                 # 비동기 서버
│
├── 📁 lungcancer/                  # 실제 기능들
│   ├── 🧠 models.py               # 데이터베이스 테이블
│   ├── 🎯 views.py                # 비즈니스 로직
│   ├── 🎨 templates/               # HTML 페이지들
│   │   ├── 🏠 home.html           # 홈페이지
│   │   ├── 🔮 predict.html        # 예측 페이지
│   │   ├── 👥 patient_list.html   # 환자 관리
│   │   └── 📊 visualization.html  # 데이터 시각화
│   ├── 🤖 ml_model/               # AI 모델 저장소
│   │   ├── 🧠 lung_cancer_model.pkl
│   │   └── 📝 feature_names.pkl
│   └── 🔗 urls.py                 # 앱 URL 설정
│
├── 📁 static/                      # 정적 파일
│   ├── 🎨 css/home.css            # 스타일
│   └── 🖼️ img/폐암_이미지.jpeg      # 이미지
│
├── 🐳 Dockerfile                   # Docker 이미지 설정
├── 🐳 docker-compose.yml          # Docker 컨테이너 설정
├── 📋 requirements.txt            # Python 패키지
├── 🚀 manage.py                   # Django 관리
└── 📖 README.md                   # 프로젝트 문서
```

---

## 🔄 배포 프로세스 플로우

```
1. 개발자 로컬
   ┌─────────────┐
   │ 코드 수정    │
   └─────┬───────┘
         │
         ▼
   ┌─────────────┐
   │ 로컬 테스트  │
   └─────┬───────┘
         │
         ▼
   ┌─────────────┐
   │ Git Push    │
   └─────┬───────┘
         │
         ▼
2. GitHub 저장소
   ┌─────────────┐
   │ 코드 저장   │
   └─────┬───────┘
         │
         ▼
3. GCP 서버
   ┌─────────────┐
   │ Git Pull     │
   └─────┬───────┘
         │
         ▼
   ┌─────────────┐
   │ Docker 재시작│
   └─────┬───────┘
         │
         ▼
4. 웹사이트
   ┌─────────────┐
   │ http://     │
   │ 104.154.    │
   │ 212.61:8000 │
   └─────────────┘
```

---

## 🗄️ 데이터베이스 구조

```
MySQL Database (GCP 서버)
│
├── 👥 lungcancer_lungrecord
│   ├── id (Primary Key)
│   ├── patient_name
│   ├── age
│   ├── gender
│   ├── smoking
│   ├── allergy
│   ├── wheezing
│   ├── alcohol_consuming
│   ├── coughing
│   ├── shortness_of_breath
│   ├── swallowing_difficulty
│   ├── chest_pain
│   ├── created_at
│   └── updated_at
│
├── 🔮 lungcancer_lungresult
│   ├── id (Primary Key)
│   ├── lung_record (Foreign Key)
│   ├── prediction
│   ├── probability
│   ├── created_at
│   └── updated_at
│
├── 📢 lungcancer_notice
│   ├── id (Primary Key)
│   ├── title
│   ├── content
│   ├── is_important
│   ├── created_at
│   └── updated_at
│
└── ❓ lungcancer_qna
    ├── id (Primary Key)
    ├── question
    ├── answer
    ├── category
    ├── is_answered
    ├── created_at
    └── updated_at
```

---

## 🌐 네트워크 구조

```
인터넷
  │
  ▼
┌─────────────────────────────────────────────────────────────────┐
│                    Google Cloud Platform                      │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐         │
│  │   Firewall  │    │   VM Instance│    │   Database   │         │
│  │ (Port 8000) │───▶│ (Ubuntu)    │───▶│ (MySQL)     │         │
│  └─────────────┘    └─────────────┘    └─────────────┘         │
│         │                   │                   │             │
│         ▼                   ▼                   ▼             │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐         │
│  │   Docker    │    │   Django     │    │   데이터     │         │
│  │ Container   │    │   Web App    │    │   저장      │         │
│  └─────────────┘    └─────────────┘    └─────────────┘         │
└─────────────────────────────────────────────────────────────────┘
  │
  ▼
사용자 브라우저
```

---

## 🚀 배포 명령어 체크리스트

### 로컬 개발
```bash
# 1. 프로젝트 폴더로 이동
cd "/Users/nogeon-u/Desktop/건양대_바이오메디컬 /Django/Django_project"

# 2. Docker 실행
docker-compose up --build

# 3. 브라우저 확인
# http://localhost:8000
```

### GitHub 업로드
```bash
# 1. 변경사항 추가
git add .

# 2. 커밋
git commit -m "변경사항 설명"

# 3. 푸시
git push origin main
```

### 서버 배포
```bash
# 1. GCP 서버 접속
ssh username@104.154.212.61

# 2. 프로젝트 폴더로 이동
cd ~/lung-cancer-prediction-system

# 3. 최신 코드 다운로드
git pull origin main

# 4. Docker 재시작
sudo docker-compose down
sudo docker-compose build --no-cache
sudo docker-compose up -d

# 5. 웹사이트 확인
# http://104.154.212.61:8000
```

---

## 🔧 문제 해결 가이드

### 자주 발생하는 문제들

#### 1. 포트 충돌 (Port already in use)
```bash
# 해결방법
sudo lsof -i :8000
sudo kill -9 [PID]
```

#### 2. Docker 오류
```bash
# 해결방법
docker-compose down
docker system prune -f
docker-compose up --build
```

#### 3. 데이터베이스 연결 오류
```bash
# 해결방법
python manage.py makemigrations
python manage.py migrate
```

#### 4. 한글 폰트 문제
```bash
# 해결방법
docker-compose down
docker-compose build --no-cache
docker-compose up -d
```

---

## 📊 성능 모니터링

### 서버 상태 확인
```bash
# Docker 컨테이너 상태
sudo docker-compose ps

# 컨테이너 로그 확인
sudo docker-compose logs -f web

# 서버 리소스 사용량
htop
```

### 웹사이트 상태 확인
- **URL**: http://104.154.212.61:8000/
- **응답 시간**: < 2초
- **가용성**: 99.9%

---

## 🎯 팀원 개발 워크플로우

```
1. 코드 수정
   ↓
2. 로컬 테스트
   ↓
3. Git 커밋 & 푸시
   ↓
4. 서버 배포
   ↓
5. 웹사이트 확인
   ↓
6. 팀원들에게 공유
```

---

**© 2025 건양대학교 바이오메디컬공학과 1팀. All rights reserved.**
